<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
  <meta name="theme-color" content="#f9c8d4" />
  <meta name="description" content="–ü–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ —Å 8 –ú–∞—Ä—Ç–∞ –¥–ª—è —Å–∞–º–æ–π –ª—É—á—à–µ–π –º–∞–º—ã –≤ –º–∏—Ä–µ! üíê" />
  <meta property="og:title" content="–° 8 –ú–∞—Ä—Ç–∞, –ú–∞–º–æ—á–∫–∞! üíê" />
  <meta property="og:description" content="–û—Å–æ–±–µ–Ω–Ω–æ–µ –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–ª—è —Å–∞–º–æ–π –ª—É—á—à–µ–π –º–∞–º–æ—á–∫–∏ –≤ –º–∏—Ä–µ!" />
  <meta property="og:type" content="website" />
  <title>–° 8 –ú–∞—Ä—Ç–∞, –ú–∞–º–æ—á–∫–∞! üíê</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Nunito:wght@300;400;600;700&display=swap" rel="stylesheet" />

  <style>
    /* ===== RESET ===== */
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --rose:      #e8738a;
      --deep-rose: #c0506a;
      --lavender:  #d8b4f8;
      --purple:    #9b59b6;
      --gold:      #f0c040;
      --peach:     #ffd6b0;
      --white:     #ffffff;
      --text:      #4a3040;
    }

    html { scroll-behavior: smooth; }

    body {
      font-family: 'Nunito', sans-serif;
      color: var(--text);
      overflow-x: hidden;
      -webkit-tap-highlight-color: transparent;
      background: #fde8f0;
    }

    /* ===== ANIMATED GRADIENT ===== */
    .animated-bg {
      background: linear-gradient(-45deg, #fde8f0, #f3d5f7, #dce9ff, #fff8e1, #ffe4ee, #f0e6ff);
      background-size: 500% 500%;
      animation: gradientShift 20s ease infinite;
    }

    @keyframes gradientShift {
      0%   { background-position: 0% 50%; }
      33%  { background-position: 100% 50%; }
      66%  { background-position: 50% 0%; }
      100% { background-position: 0% 50%; }
    }

    /* ===== CANVAS OVERLAY (trail + fireworks) ===== */
    #canvas-overlay {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      pointer-events: none;
      z-index: 9998;
    }

    /* ===== FLOATING HEARTS (CSS, fixed background) ===== */
    .hearts-bg {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 0;
      overflow: hidden;
    }

    .heart-float {
      position: absolute;
      bottom: -3rem;
      font-size: var(--sz, 1.5rem);
      opacity: 0;
      animation: heartRise var(--dur, 14s) var(--delay, 0s) ease-in-out infinite;
      will-change: transform, opacity;
    }

    @keyframes heartRise {
      0%   { transform: translate(0, 0) rotate(0deg) scale(0.6);  opacity: 0; }
      8%   { opacity: var(--op, 0.35); }
      90%  { opacity: var(--op, 0.35); }
      100% { transform: translate(var(--dx, 20px), -110vh) rotate(360deg) scale(1.1); opacity: 0; }
    }

    /* ===== TOAST ===== */
    .toast {
      position: fixed;
      bottom: 2rem; left: 50%;
      transform: translateX(-50%) translateY(80px);
      background: rgba(60,20,40,.88);
      color: #fff;
      padding: .85rem 1.8rem;
      border-radius: 50px;
      font-size: .95rem;
      font-weight: 600;
      z-index: 10000;
      transition: transform .4s cubic-bezier(.34,1.56,.64,1), opacity .4s ease;
      opacity: 0;
      white-space: nowrap;
    }
    .toast.show { transform: translateX(-50%) translateY(0); opacity: 1; }

    /* ===========================
       INTRO SCREEN
    =========================== */
    .intro-screen {
      position: fixed;
      inset: 0;
      z-index: 9000;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 1.8rem;
      padding: 2rem 1.5rem;
      text-align: center;
      background: linear-gradient(-45deg, #fde8f0, #f3d5f7, #e8d5ff, #ffe4ee);
      background-size: 400% 400%;
      animation: gradientShift 18s ease infinite;
      transition: opacity .8s ease, transform .8s ease;
    }

    .intro-screen.closing {
      opacity: 0;
      transform: scale(1.08);
      pointer-events: none;
    }

    .intro-title {
      font-family: 'Playfair Display', serif;
      font-size: clamp(2.2rem, 9vw, 4.5rem);
      color: var(--deep-rose);
      font-style: italic;
      animation: fadeSlideDown 1s ease both;
      text-shadow: 0 2px 20px rgba(200,80,120,.2);
    }

    .intro-sub {
      font-size: clamp(1rem, 3.5vw, 1.3rem);
      color: #8a4060;
      font-weight: 600;
      animation: fadeSlideDown 1s .3s ease both;
    }

    /* === Envelope === */
    .envelope-wrap {
      animation: envFloat 3s ease-in-out infinite, fadeSlideDown 1s .5s ease both;
    }

    .envelope {
      position: relative;
      width: min(300px, 78vw);
      height: min(200px, 52vw);
    }

    /* Envelope body */
    .env-body {
      position: absolute;
      inset: 0;
      background: linear-gradient(145deg, #fce4ec 0%, #f48fb1 65%, #e91e8c 100%);
      border-radius: 6px 6px 14px 14px;
      box-shadow: 0 20px 60px rgba(200,80,120,.4), inset 0 0 30px rgba(255,255,255,.15);
    }

    /* Side triangles */
    .env-left {
      position: absolute;
      top: 0; left: 0;
      width: 50%; height: 100%;
      background: linear-gradient(to right, #ec407a, #f8bbd9);
      clip-path: polygon(0 0, 0 100%, 100% 50%);
      z-index: 1;
    }
    .env-right {
      position: absolute;
      top: 0; right: 0;
      width: 50%; height: 100%;
      background: linear-gradient(to left, #ec407a, #f8bbd9);
      clip-path: polygon(100% 0, 100% 100%, 0 50%);
      z-index: 1;
    }

    /* Bottom V fold */
    .env-bottom {
      position: absolute;
      bottom: 0; left: 0; right: 0;
      height: 52%;
      background: linear-gradient(to top, #e91e8c, #f06292);
      clip-path: polygon(0 100%, 50% 0, 100% 100%);
      z-index: 2;
    }

    /* Flap ‚Äî triangle pointing downward, flips open */
    .env-flap {
      position: absolute;
      top: 0; left: 0; right: 0;
      height: 52%;
      background: linear-gradient(160deg, #f48fb1 0%, #ce93d8 100%);
      clip-path: polygon(0 0, 100% 0, 50% 100%);
      transform-origin: top center;
      transition: transform .9s cubic-bezier(.4,0,.2,1);
      z-index: 4;
      filter: drop-shadow(0 6px 12px rgba(200,80,120,.3));
    }
    .envelope.open .env-flap {
      transform: perspective(700px) rotateX(-175deg);
    }

    /* Hearts inside */
    .env-hearts {
      position: absolute;
      bottom: 22%; left: 50%;
      transform: translateX(-50%);
      font-size: 1.6rem;
      z-index: 3;
      opacity: 0;
      transition: opacity .4s ease .6s, transform 1s cubic-bezier(.34,1.56,.64,1) .6s;
      white-space: nowrap;
      letter-spacing: .3rem;
    }
    .envelope.open .env-hearts {
      opacity: 1;
      transform: translateX(-50%) translateY(-165%);
    }

    /* Open button */
    .btn-open {
      display: inline-flex;
      align-items: center;
      gap: .5rem;
      background: linear-gradient(135deg, var(--rose), var(--purple));
      color: #fff;
      border: none;
      border-radius: 50px;
      padding: 1.1rem 2.4rem;
      font-size: clamp(1rem, 3.5vw, 1.2rem);
      font-family: 'Nunito', sans-serif;
      font-weight: 700;
      cursor: pointer;
      box-shadow: 0 8px 30px rgba(200,80,140,.45);
      transition: transform .25s ease, box-shadow .25s ease;
      min-height: 56px;
      letter-spacing: .03em;
      animation: fadeSlideUp 1s 1s ease both, btnGlow 2.5s 2s ease-in-out infinite;
    }
    .btn-open:active { transform: scale(.96); }

    @keyframes btnGlow {
      0%,100% { box-shadow: 0 8px 30px rgba(200,80,140,.45); }
      50%      { box-shadow: 0 8px 50px rgba(200,80,140,.75), 0 0 30px rgba(200,80,140,.3); }
    }
    @keyframes envFloat {
      0%,100% { transform: translateY(0) rotate(-1deg); }
      50%      { transform: translateY(-14px) rotate(1deg); }
    }

    /* ===========================
       MAIN CONTENT
    =========================== */
    .main-hidden {
      opacity: 0;
      transform: translateY(18px);
      transition: opacity .9s ease, transform .9s ease;
    }
    .main-visible {
      opacity: 1;
      transform: translateY(0);
    }

    /* ===========================
       HERO
    =========================== */
    .hero {
      position: relative;
      min-height: 100svh;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-end;
      padding-bottom: clamp(3rem, 8vw, 5rem);
      text-align: center;
    }

    #canvas-eight {
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100%;
      pointer-events: none;
      z-index: 1;
    }

    .hero-text {
      position: relative;
      z-index: 2;
      padding: 0 1.5rem;
    }

    .hero-march {
      font-family: 'Playfair Display', serif;
      font-size: clamp(2rem, 9vw, 4.5rem);
      font-style: italic;
      color: var(--deep-rose);
      letter-spacing: .12em;
      text-shadow: 0 2px 20px rgba(200,80,120,.25);
      animation: fadeSlideUp 1s .2s ease both;
    }

    .hero-subtitle {
      font-size: clamp(1.1rem, 4vw, 1.6rem);
      color: #7a4060;
      font-weight: 700;
      letter-spacing: .05em;
      margin-top: .5rem;
      animation: fadeSlideUp 1s .5s ease both;
      text-shadow: 0 1px 10px rgba(255,255,255,.7);
    }

    .scroll-hint {
      position: absolute;
      bottom: 1.2rem; left: 50%;
      transform: translateX(-50%);
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: .35rem;
      z-index: 2;
      animation: fadeSlideUp 1s 1s ease both;
    }
    .scroll-hint span {
      font-size: .75rem;
      color: rgba(160,80,120,.8);
      letter-spacing: .12em;
      text-transform: uppercase;
    }
    .scroll-arrow {
      width: 22px; height: 22px;
      border-right: 3px solid var(--rose);
      border-bottom: 3px solid var(--rose);
      transform: rotate(45deg);
      animation: arrowBounce 1.6s ease-in-out infinite;
    }

    /* ===========================
       WAVE SEPARATOR
    =========================== */
    .wave-sep {
      position: relative;
      height: 70px;
      overflow: hidden;
      line-height: 0;
    }
    .wave-sep svg {
      position: absolute;
      bottom: 0;
      width: 100%;
      height: 100%;
    }

    /* ===========================
       SECTIONS COMMON
    =========================== */
    section {
      position: relative;
      padding: clamp(3rem, 8vw, 6rem) clamp(1.2rem, 5vw, 3rem);
    }

    .section-title {
      font-family: 'Playfair Display', serif;
      font-size: clamp(1.8rem, 5.5vw, 3rem);
      text-align: center;
      margin-bottom: 2.5rem;
      color: var(--deep-rose);
      font-style: italic;
    }

    /* ===========================
       GREETING ‚Äî TYPEWRITER
    =========================== */
    .greeting {
      background: linear-gradient(170deg, #fff5f9 0%, #f8edff 100%);
      text-align: center;
    }

    .typewriter-box {
      max-width: 700px;
      margin: 0 auto;
      font-size: clamp(1.05rem, 3vw, 1.3rem);
      line-height: 1.9;
      color: #5a3a50;
      text-align: left;
      background: rgba(255,255,255,.7);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      border-radius: 22px;
      padding: 2rem 2rem;
      box-shadow: 0 10px 40px rgba(200,100,140,.12);
      border: 1.5px solid rgba(240,160,180,.25);
    }

    #tw-cursor {
      display: inline-block;
      width: 2px;
      height: 1.1em;
      background: var(--deep-rose);
      margin-left: 2px;
      vertical-align: middle;
      animation: cursorBlink 1s ease-in-out infinite;
    }

    @keyframes cursorBlink {
      0%,100% { opacity: 1; }
      50%      { opacity: 0; }
    }

    /* ===========================
       REASONS ‚Äî GLASSMORPHISM CARDS
    =========================== */
    .reasons {
      text-align: center;
    }

    .cards-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(min(100%, 255px), 1fr));
      gap: 1.5rem;
      max-width: 880px;
      margin: 0 auto;
    }

    .glass-card {
      background: rgba(255,255,255,.45);
      backdrop-filter: blur(18px);
      -webkit-backdrop-filter: blur(18px);
      border: 1.5px solid rgba(255,255,255,.65);
      border-radius: 24px;
      padding: 2rem 1.6rem;
      text-align: center;
      box-shadow: 0 8px 32px rgba(200,100,140,.14), inset 0 0 24px rgba(255,255,255,.18);
      will-change: transform;
      /* 3-D reveal: overrides generic .reveal */
      opacity: 0;
      transform: perspective(800px) rotateY(-35deg) translateZ(-20px);
      transition: opacity .85s ease, transform .85s cubic-bezier(.25,.46,.45,.94);
    }

    .glass-card.visible {
      opacity: 1;
      transform: perspective(800px) rotateY(0deg) translateZ(0);
    }

    .glass-card.d1 { transition-delay: .1s; }
    .glass-card.d2 { transition-delay: .2s; }
    .glass-card.d3 { transition-delay: .3s; }
    .glass-card.d4 { transition-delay: .4s; }
    .glass-card.d5 { transition-delay: .5s; }
    .glass-card.d6 { transition-delay: .6s; }

    .card-icon {
      font-size: 2.8rem;
      display: block;
      margin-bottom: 1rem;
      filter: drop-shadow(0 4px 8px rgba(200,100,140,.3));
    }
    .card-title {
      font-family: 'Playfair Display', serif;
      font-size: 1.18rem;
      color: var(--deep-rose);
      margin-bottom: .55rem;
      font-weight: 700;
    }
    .card-text {
      font-size: .95rem;
      color: #7a5060;
      line-height: 1.65;
    }

    /* ===========================
       WISHES ‚Äî FLOATING BUBBLES
    =========================== */
    .wishes {
      background: linear-gradient(135deg, #f8e8ff 0%, #ffe4ee 50%, #fff4d8 100%);
      text-align: center;
    }

    .wishes-list {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 1.1rem;
      max-width: 800px;
      margin: 0 auto;
    }

    .wish-pill {
      background: rgba(255,255,255,.78);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border: 1.5px solid rgba(230,130,160,.32);
      border-radius: 50px;
      padding: .8rem 1.6rem;
      font-size: clamp(.9rem, 2.5vw, 1.05rem);
      color: #6a3050;
      font-weight: 600;
      box-shadow: 0 4px 18px rgba(200,100,140,.1);
      animation: pillFloat var(--dur, 9s) var(--delay, 0s) ease-in-out infinite;
      will-change: transform;
    }

    @keyframes pillFloat {
      0%,100% { transform: translateY(0) rotate(var(--r0, -1.5deg)); }
      40%      { transform: translateY(-12px) rotate(var(--r1, 1.5deg)); }
      70%      { transform: translateY(6px) rotate(var(--r2, -.8deg)); }
    }

    /* ===========================
       LOVE COUNTER
    =========================== */
    .love-sec {
      text-align: center;
      padding: clamp(4rem, 10vw, 8rem) clamp(1.2rem, 5vw, 3rem);
    }

    .infinity {
      display: block;
      font-family: 'Playfair Display', serif;
      font-size: clamp(7rem, 28vw, 14rem);
      line-height: 1;
      background: linear-gradient(135deg, var(--rose), var(--purple), var(--gold));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      filter: drop-shadow(0 4px 24px rgba(200,80,120,.45));
      animation: infPulse 2.2s ease-in-out infinite;
      will-change: transform;
    }
    @keyframes infPulse {
      0%,100% { transform: scale(1);    filter: drop-shadow(0 4px 24px rgba(200,80,120,.45)); }
      50%      { transform: scale(1.07); filter: drop-shadow(0 8px 48px rgba(200,80,120,.7)); }
    }

    .love-label {
      font-family: 'Playfair Display', serif;
      font-size: clamp(1.2rem, 4vw, 2rem);
      color: var(--deep-rose);
      font-style: italic;
      margin-top: 1rem;
    }
    .love-sub {
      font-size: clamp(.95rem, 2.8vw, 1.2rem);
      color: #8a4060;
      font-weight: 600;
      margin-top: .5rem;
    }

    /* ===========================
       FINAL
    =========================== */
    .final {
      min-height: 90svh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 2rem;
      text-align: center;
      padding: clamp(3rem, 8vw, 6rem) clamp(1.2rem, 5vw, 3rem);
    }

    .big-heart {
      font-size: clamp(6rem, 28vw, 12rem);
      display: block;
      animation: heartPulse 1.2s ease-in-out infinite;
      filter: drop-shadow(0 8px 32px rgba(220,60,100,.4));
      will-change: transform;
    }
    .final-title {
      font-family: 'Playfair Display', serif;
      font-size: clamp(2rem, 7vw, 3.8rem);
      color: var(--deep-rose);
      font-style: italic;
      line-height: 1.2;
    }
    .final-sub {
      font-size: clamp(1rem, 3vw, 1.3rem);
      color: #8a4060;
      font-weight: 600;
    }

    .btn-share {
      display: inline-flex;
      align-items: center;
      gap: .5rem;
      background: linear-gradient(135deg, var(--rose), var(--purple));
      color: #fff;
      border: none;
      border-radius: 50px;
      padding: 1rem 2.2rem;
      font-size: 1rem;
      font-family: 'Nunito', sans-serif;
      font-weight: 700;
      cursor: pointer;
      box-shadow: 0 6px 24px rgba(200,80,140,.38);
      transition: transform .25s ease, box-shadow .25s ease;
      min-height: 52px;
      letter-spacing: .04em;
    }
    .btn-share:active { transform: scale(.96); }

    /* ===========================
       KEYFRAMES
    =========================== */
    @keyframes float {
      0%,100% { transform: translateY(0) rotate(-1deg); }
      50%      { transform: translateY(-16px) rotate(1deg); }
    }
    @keyframes heartPulse {
      0%,100% { transform: scale(1); }
      50%      { transform: scale(1.1); }
    }
    @keyframes fadeSlideUp {
      from { opacity: 0; transform: translateY(30px); }
      to   { opacity: 1; transform: translateY(0); }
    }
    @keyframes fadeSlideDown {
      from { opacity: 0; transform: translateY(-30px); }
      to   { opacity: 1; transform: translateY(0); }
    }
    @keyframes arrowBounce {
      0%,100% { transform: rotate(45deg) translate(0,0);     opacity: 1;   }
      50%      { transform: rotate(45deg) translate(5px,5px); opacity: .55; }
    }

    /* ===========================
       GENERIC REVEAL
    =========================== */
    .reveal {
      opacity: 0;
      transform: translateY(38px);
      transition: opacity .7s ease, transform .7s ease;
      will-change: opacity, transform;
    }
    .reveal.visible {
      opacity: 1;
      transform: translateY(0);
    }
    .d1 { transition-delay: .1s; }
    .d2 { transition-delay: .2s; }
    .d3 { transition-delay: .3s; }
    .d4 { transition-delay: .4s; }
    .d5 { transition-delay: .5s; }
    .d6 { transition-delay: .6s; }

    /* ===========================
       RESPONSIVE
    =========================== */
    @media (max-width: 420px) {
      .cards-grid { grid-template-columns: 1fr; }
      .typewriter-box { padding: 1.4rem 1.2rem; }
    }

    /* ===========================
       REDUCE MOTION
    =========================== */
    @media (prefers-reduced-motion: reduce) {
      *, *::before, *::after {
        animation-duration: .01ms !important;
        transition-duration: .01ms !important;
      }
    }
  </style>
</head>
<body>

<!-- ===== CANVAS OVERLAY: trail + fireworks ===== -->
<canvas id="canvas-overlay" aria-hidden="true"></canvas>

<!-- ===== FLOATING CSS HEARTS ===== -->
<div class="hearts-bg" aria-hidden="true">
  <span class="heart-float" style="left:4%;  --sz:1.2rem;--op:.32;--dur:15s;--delay:0s;  --dx:25px">üíó</span>
  <span class="heart-float" style="left:13%; --sz:1.7rem;--op:.38;--dur:12s;--delay:2.5s;--dx:-30px">üíï</span>
  <span class="heart-float" style="left:24%; --sz:1rem;  --op:.28;--dur:18s;--delay:1s;  --dx:35px">üíñ</span>
  <span class="heart-float" style="left:36%; --sz:2rem;  --op:.35;--dur:11s;--delay:4s;  --dx:-20px">‚ù§Ô∏è</span>
  <span class="heart-float" style="left:49%; --sz:1.4rem;--op:.38;--dur:14s;--delay:1.5s;--dx:22px">üíó</span>
  <span class="heart-float" style="left:60%; --sz:.9rem; --op:.28;--dur:16s;--delay:3.2s;--dx:-35px">üíï</span>
  <span class="heart-float" style="left:72%; --sz:1.6rem;--op:.34;--dur:10s;--delay:.8s; --dx:18px">üíñ</span>
  <span class="heart-float" style="left:85%; --sz:1.2rem;--op:.38;--dur:17s;--delay:5s;  --dx:-22px">üíó</span>
  <span class="heart-float" style="left:20%; --sz:1.3rem;--op:.28;--dur:19s;--delay:6.5s;--dx:28px">‚ú®</span>
  <span class="heart-float" style="left:57%; --sz:1.1rem;--op:.32;--dur:13s;--delay:7.5s;--dx:-14px">‚ú®</span>
  <span class="heart-float" style="left:42%; --sz:1.5rem;--op:.3; --dur:20s;--delay:9s;  --dx:32px">üå∏</span>
  <span class="heart-float" style="left:78%; --sz:1rem;  --op:.28;--dur:22s;--delay:3.8s;--dx:-26px">üå∏</span>
</div>

<!-- ===== TOAST ===== -->
<div class="toast" id="toast" role="status" aria-live="polite"></div>

<!-- ===========================
     INTRO SCREEN
=========================== -->
<div id="intro" class="intro-screen">
  <h1 class="intro-title">–° 8 –ú–∞—Ä—Ç–∞!</h1>
  <p class="intro-sub">–î–ª—è —Å–∞–º–æ–π –ª—é–±–∏–º–æ–π –∏ –ª—É—á—à–µ–π –º–∞–º—ã ÔøΩÔøΩ</p>

  <div class="envelope-wrap">
    <div class="envelope" id="envelope">
      <div class="env-body"></div>
      <div class="env-left"></div>
      <div class="env-right"></div>
      <div class="env-bottom"></div>
      <div class="env-flap"></div>
      <div class="env-hearts">üíå ‚ù§Ô∏è üå∏</div>
    </div>
  </div>

  <button id="btn-open" class="btn-open" type="button" aria-label="–û—Ç–∫—Ä—ã—Ç—å –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ">
    –û—Ç–∫—Ä–æ–π –º–µ–Ω—è, –º–∞–º–æ—á–∫–∞ üíå
  </button>
</div>

<!-- ===========================
     MAIN CONTENT
=========================== -->
<main id="main" class="main-hidden">

  <!-- ‚îÄ‚îÄ HERO ‚îÄ‚îÄ -->
  <section id="hero" class="hero animated-bg" aria-label="8 –ú–∞—Ä—Ç–∞">
    <canvas id="canvas-eight" aria-hidden="true"></canvas>
    <div class="hero-text">
      <div class="hero-march">8 –ú–∞—Ä—Ç–∞</div>
      <p class="hero-subtitle">–° –ü—Ä–∞–∑–¥–Ω–∏–∫–æ–º, –ú–∞–º–æ—á–∫–∞! üíñ</p>
    </div>
    <div class="scroll-hint" aria-hidden="true">
      <span>–ª–∏—Å—Ç–∞–π –≤–Ω–∏–∑</span>
      <div class="scroll-arrow"></div>
    </div>
  </section>

  <!-- wave 1 -->
  <div class="wave-sep" style="background:#fff5f9;">
    <svg viewBox="0 0 1440 70" preserveAspectRatio="none">
      <path d="M0,35 C360,70 720,0 1080,35 C1260,52 1390,44 1440,35 L1440,70 L0,70 Z"
            fill="#fde8f0"/>
    </svg>
  </div>

  <!-- ‚îÄ‚îÄ GREETING ‚îÄ‚îÄ -->
  <section id="greeting" class="greeting" aria-label="–ü–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ">
    <h2 class="section-title reveal">–î–æ—Ä–æ–≥–∞—è –º–∞–º–æ—á–∫–∞</h2>
    <div class="typewriter-box reveal d1">
      <span id="tw-text"></span><span id="tw-cursor"></span>
    </div>
  </section>

  <!-- wave 2 -->
  <div class="wave-sep animated-bg">
    <svg viewBox="0 0 1440 70" preserveAspectRatio="none">
      <path d="M0,20 C480,70 960,0 1440,40 L1440,70 L0,70 Z"
            fill="#fff5f9"/>
    </svg>
  </div>

  <!-- ‚îÄ‚îÄ REASONS ‚îÄ‚îÄ -->
  <section id="reasons" class="reasons animated-bg" aria-label="–ü—Ä–∏—á–∏–Ω—ã">
    <h2 class="section-title reveal">–ü–æ—á–µ–º—É —Ç—ã –ª—É—á—à–∞—è –º–∞–º–∞</h2>
    <div class="cards-grid">
      <article class="glass-card d1" tabindex="0">
        <span class="card-icon">ü§ó</span>
        <div class="card-title">–¢–≤–æ–∏ –æ–±—ä—è—Ç–∏—è</div>
        <p class="card-text">–í —Ç–≤–æ–∏—Ö –æ–±—ä—è—Ç–∏—è—Ö –∏—Å—á–µ–∑–∞—é—Ç –ª—é–±—ã–µ —Å—Ç—Ä–∞—Ö–∏. –û–Ω–∏ ‚Äî –º–æ—ë —Å–∞–º–æ–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ –º–µ—Å—Ç–æ –≤ –º–∏—Ä–µ.</p>
      </article>
      <article class="glass-card d2" tabindex="0">
        <span class="card-icon">üçΩÔ∏è</span>
        <div class="card-title">–¢–≤–æ—è –∑–∞–±–æ—Ç–∞</div>
        <p class="card-text">–¢—ã –≤—Å–µ–≥–¥–∞ –∑–Ω–∞–µ—à—å, –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –Ω–∞–∫–æ—Ä–º–∏—Ç—å, —Å–æ–≥—Ä–µ—Ç—å –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ –ø–æ–±—ã—Ç—å —Ä—è–¥–æ–º. –¢–≤–æ—è –∑–∞–±–æ—Ç–∞ –±–µ–∑–≥—Ä–∞–Ω–∏—á–Ω–∞.</p>
      </article>
      <article class="glass-card d3" tabindex="0">
        <span class="card-icon">üí™</span>
        <div class="card-title">–¢–≤–æ—è —Å–∏–ª–∞</div>
        <p class="card-text">–¢—ã —Å–ø—Ä–∞–≤–ª—è–µ—à—å—Å—è —Å —Ç—Ä—É–¥–Ω–æ—Å—Ç—è–º–∏ —Å –¥–æ—Å—Ç–æ–∏–Ω—Å—Ç–≤–æ–º –∏ —É–ª—ã–±–∫–æ–π. –¢—ã ‚Äî –º–æ—è –≥–ª–∞–≤–Ω–∞—è –≤–¥–æ—Ö–Ω–æ–≤–∏—Ç–µ–ª—å–Ω–∏—Ü–∞.</p>
      </article>
      <article class="glass-card d4" tabindex="0">
        <span class="card-icon">üß†</span>
        <div class="card-title">–¢–≤–æ—è –º—É–¥—Ä–æ—Å—Ç—å</div>
        <p class="card-text">–¢–≤–æ–∏ —Å–æ–≤–µ—Ç—ã –≤—Å–µ–≥–¥–∞ —Ç–æ—á–Ω—ã –∏ —Å–≤–æ–µ–≤—Ä–µ–º–µ–Ω–Ω—ã. –¢—ã –ø–æ–º–æ–≥–∞–µ—à—å –º–Ω–µ –≤–∏–¥–µ—Ç—å –º–∏—Ä —à–∏—Ä–µ –∏ –¥–æ–±—Ä–µ–µ.</p>
      </article>
      <article class="glass-card d5" tabindex="0">
        <span class="card-icon">üòÑ</span>
        <div class="card-title">–¢–≤–æ–π —Å–º–µ—Ö</div>
        <p class="card-text">–¢–≤–æ–π —Å–º–µ—Ö ‚Äî —Å–∞–º—ã–π –∑–∞—Ä–∞–∑–∏—Ç–µ–ª—å–Ω—ã–π –∏ —Ä–∞–¥–æ—Å—Ç–Ω—ã–π –∑–≤—É–∫. –†—è–¥–æ–º —Å —Ç–æ–±–æ–π –≤—Å–µ–≥–¥–∞ —Ç–µ–ø–ª–æ –∏ –≤–µ—Å–µ–ª–æ.</p>
      </article>
      <article class="glass-card d6" tabindex="0">
        <span class="card-icon">üåü</span>
        <div class="card-title">–¢–≤–æ—è –ª—é–±–æ–≤—å</div>
        <p class="card-text">–¢—ã –ª—é–±–∏—à—å –º–µ–Ω—è –±–µ–∑—É—Å–ª–æ–≤–Ω–æ ‚Äî —Ç–∞–∫–∏–º, –∫–∞–∫–æ–π —è –µ—Å—Ç—å. –≠—Ç–æ —Å–∞–º—ã–π –¥—Ä–∞–≥–æ—Ü–µ–Ω–Ω—ã–π –ø–æ–¥–∞—Ä–æ–∫ –≤ –∂–∏–∑–Ω–∏.</p>
      </article>
    </div>
  </section>

  <!-- wave 3 -->
  <div class="wave-sep" style="background:linear-gradient(135deg,#f8e8ff,#ffe4ee,#fff4d8);">
    <svg viewBox="0 0 1440 70" preserveAspectRatio="none">
      <path d="M0,40 C360,0 720,70 1080,30 C1260,10 1390,50 1440,40 L1440,70 L0,70 Z"
            fill="rgba(255,255,255,.45)"/>
    </svg>
  </div>

  <!-- ‚îÄ‚îÄ WISHES ‚îÄ‚îÄ -->
  <section id="wishes" class="wishes" aria-label="–ü–æ–∂–µ–ª–∞–Ω–∏—è">
    <h2 class="section-title reveal">–ú–æ–∏ –ø–æ–∂–µ–ª–∞–Ω–∏—è —Ç–µ–±–µ</h2>
    <div class="wishes-list">
      <div class="wish-pill reveal d1" style="--dur:9s; --delay:0s;  --r0:-2deg;--r1:2deg;--r2:-.8deg">üåø –ö—Ä–µ–ø–∫–æ–≥–æ –∑–¥–æ—Ä–æ–≤—å—è</div>
      <div class="wish-pill reveal d2" style="--dur:11s;--delay:.6s; --r0:1.5deg;--r1:-2deg;--r2:1deg">‚òÄÔ∏è –°–æ–ª–Ω–µ—á–Ω—ã—Ö –¥–Ω–µ–π</div>
      <div class="wish-pill reveal d3" style="--dur:8s; --delay:1.1s;--r0:-1deg;--r1:2.5deg;--r2:-.5deg">üíï –ë–æ–ª—å—à–æ–π –ª—é–±–≤–∏</div>
      <div class="wish-pill reveal d4" style="--dur:10s;--delay:.3s; --r0:2deg;--r1:-1.5deg;--r2:1.5deg">üòä –ò—Å–∫—Ä–µ–Ω–Ω–µ–π —Ä–∞–¥–æ—Å—Ç–∏</div>
      <div class="wish-pill reveal d5" style="--dur:12s;--delay:1.7s;--r0:-1.5deg;--r1:1deg;--r2:-2deg">‚ú® –ò—Å–ø–æ–ª–Ω–µ–Ω–∏—è –º–µ—á—Ç—ã</div>
      <div class="wish-pill reveal d6" style="--dur:9s; --delay:.8s; --r0:1deg;--r1:-2.5deg;--r2:.8deg">üå∫ –¶–≤–µ—Ç—É—â–µ–π –≤–µ—Å–Ω—ã</div>
      <div class="wish-pill reveal d1" style="--dur:11s;--delay:2s;  --r0:-2.5deg;--r1:1.5deg;--r2:-1deg">üçÄ –£–¥–∞—á–∏ –≤–æ –≤—Å—ë–º</div>
      <div class="wish-pill reveal d2" style="--dur:8s; --delay:.2s; --r0:1deg;--r1:-1.5deg;--r2:2deg">üé∂ –õ—ë–≥–∫–æ—Å—Ç–∏ –Ω–∞ –¥—É—à–µ</div>
      <div class="wish-pill reveal d3" style="--dur:13s;--delay:1.3s;--r0:-1deg;--r1:3deg;--r2:-1.5deg">ü•Ç –ü–æ–≤–æ–¥–æ–≤ –¥–ª—è –ø—Ä–∞–∑–¥–Ω–∏–∫–∞</div>
      <div class="wish-pill reveal d4" style="--dur:10s;--delay:.5s; --r0:2.5deg;--r1:-1deg;--r2:1.5deg">üíé –¢–æ–ª—å–∫–æ –ª—É—á—à–µ–≥–æ</div>
    </div>
  </section>

  <!-- wave 4 -->
  <div class="wave-sep animated-bg">
    <svg viewBox="0 0 1440 70" preserveAspectRatio="none">
      <path d="M0,30 C480,70 960,0 1440,35 L1440,70 L0,70 Z"
            fill="rgba(255,245,249,.85)"/>
    </svg>
  </div>

  <!-- ‚îÄ‚îÄ LOVE COUNTER ‚îÄ‚îÄ -->
  <section id="love-counter" class="love-sec animated-bg" aria-label="–°—á—ë—Ç—á–∏–∫ –ª—é–±–≤–∏">
    <div class="infinity reveal" aria-label="–ë–µ—Å–∫–æ–Ω–µ—á–Ω–æ—Å—Ç—å">‚àû</div>
    <p class="love-label reveal d1">–õ—é–±–ª—é —Ç–µ–±—è —É–∂–µ –≤–µ—á–Ω–æ—Å—Ç—å</p>
    <p class="love-sub reveal d2">–ò –±—É–¥—É –ª—é–±–∏—Ç—å –≤—Å–µ–≥–¥–∞ ‚ù§Ô∏è</p>
  </section>

  <!-- wave 5 -->
  <div class="wave-sep" style="background:linear-gradient(160deg,#ffe0ec,#f3d5f7,#dce9ff);">
    <svg viewBox="0 0 1440 70" preserveAspectRatio="none">
      <path d="M0,40 C360,5 720,70 1080,35 C1260,18 1390,55 1440,40 L1440,70 L0,70 Z"
            fill="rgba(255,255,255,.4)"/>
    </svg>
  </div>

  <!-- ‚îÄ‚îÄ FINAL ‚îÄ‚îÄ -->
  <section id="final" class="final animated-bg" aria-label="–§–∏–Ω–∞–ª">
    <span class="big-heart reveal" aria-label="–°–µ—Ä–¥—Ü–µ">‚ù§Ô∏è</span>
    <h2 class="final-title reveal d1">–õ—é–±–ª—é —Ç–µ–±—è, –º–∞–º–∞!</h2>
    <p class="final-sub reveal d2">–°–µ–≥–æ–¥–Ω—è, –∑–∞–≤—Ç—Ä–∞ –∏ –≤—Å–µ–≥–¥–∞ üíñ</p>
    <button class="btn-share reveal d3" id="btn-share" type="button" aria-label="–ü–æ–¥–µ–ª–∏—Ç—å—Å—è —Å—Ç—Ä–∞–Ω–∏—Ü–µ–π">
      <span>üì§</span> –ü–æ–¥–µ–ª–∏—Ç—å—Å—è
    </button>
  </section>

</main><!-- #main -->

<script>
/* =======================================================
   1. INTRO ‚Äî ENVELOPE OPEN
======================================================= */
(function () {
  const btnOpen   = document.getElementById('btn-open');
  const envelope  = document.getElementById('envelope');
  const intro     = document.getElementById('intro');
  const main      = document.getElementById('main');

  btnOpen.addEventListener('click', function () {
    btnOpen.disabled = true;
    envelope.classList.add('open');

    // After flap animation, close intro ‚Üí reveal main
    setTimeout(function () {
      intro.classList.add('closing');
      setTimeout(function () {
        intro.style.display = 'none';
        main.classList.remove('main-hidden');
        main.classList.add('main-visible');
        // Give browser a frame to paint, then init canvas & observers
        requestAnimationFrame(function () {
          requestAnimationFrame(function () {
            initEightCanvas();
            setupObservers();
            initCardTilt();
          });
        });
      }, 750);
    }, 1100);
  });
}());

/* =======================================================
   2. CANVAS "8" PARTICLES
======================================================= */
function initEightCanvas() {
  var canvas = document.getElementById('canvas-eight');
  if (!canvas) return;
  var ctx = canvas.getContext('2d');

  function resize() {
    canvas.width  = canvas.offsetWidth  || window.innerWidth;
    canvas.height = canvas.offsetHeight || window.innerHeight;
  }
  resize();
  window.addEventListener('resize', resize, { passive: true });

  var W = canvas.width, H = canvas.height;

  /* --- sample "8" pixels from offscreen canvas --- */
  var off = document.createElement('canvas');
  off.width = W; off.height = H;
  var offCtx = off.getContext('2d');
  var fs = Math.min(W, H) * 0.72;
  offCtx.font = 'bold ' + fs + 'px serif';
  offCtx.fillStyle = '#000';
  offCtx.textAlign = 'center';
  offCtx.textBaseline = 'middle';
  offCtx.fillText('8', W / 2, H * 0.44);

  var data = offCtx.getImageData(0, 0, W, H).data;
  var targets = [];
  var step = Math.max(3, Math.floor(W / 90));
  for (var y = 0; y < H; y += step) {
    for (var x = 0; x < W; x += step) {
      if (data[(y * W + x) * 4 + 3] > 110) {
        targets.push({ x: x, y: y });
      }
    }
  }

  /* cap for performance */
  var MAX = Math.min(targets.length, 380);
  var sel = [];
  var stride = Math.max(1, Math.floor(targets.length / MAX));
  for (var i = 0; i < targets.length && sel.length < MAX; i += stride) {
    sel.push(targets[i]);
  }

  var particles = sel.map(function (t) {
    return {
      x:  Math.random() * W,
      y:  Math.random() * H,
      tx: t.x, ty: t.y,
      vx: 0, vy: 0,
      size: Math.random() * 2.4 + 0.9,
      hue:  300 + Math.random() * 80,
      phase: Math.random() * Math.PI * 2
    };
  });

  var t = 0;
  function loop() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    t += 0.022;
    particles.forEach(function (p) {
      var dx = p.tx - p.x, dy = p.ty - p.y;
      p.vx = p.vx * 0.84 + dx * 0.055;
      p.vy = p.vy * 0.84 + dy * 0.055;
      p.vx += Math.sin(t + p.phase) * 0.18;
      p.vy += Math.cos(t * 1.1 + p.phase) * 0.18;
      p.x += p.vx; p.y += p.vy;

      var alpha = 0.82 + Math.sin(t * 1.8 + p.phase) * 0.18;
      var r = p.size * 3.5;
      var grd = ctx.createRadialGradient(p.x, p.y, 0, p.x, p.y, r);
      grd.addColorStop(0, 'hsla(' + p.hue + ',90%,78%,' + (alpha * 0.55) + ')');
      grd.addColorStop(1, 'hsla(' + p.hue + ',90%,78%,0)');
      ctx.beginPath();
      ctx.arc(p.x, p.y, r, 0, Math.PI * 2);
      ctx.fillStyle = grd;
      ctx.fill();

      ctx.beginPath();
      ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
      ctx.fillStyle = 'hsla(' + p.hue + ',95%,82%,' + alpha + ')';
      ctx.fill();
    });
    requestAnimationFrame(loop);
  }
  loop();
}

/* =======================================================
   3. CANVAS OVERLAY ‚Äî TRAIL + FIREWORKS
======================================================= */
(function () {
  var canvas = document.getElementById('canvas-overlay');
  var ctx    = canvas.getContext('2d');
  var W, H;
  var trailParts  = [];
  var fwParts     = [];
  var running     = false;
  var HEARTS = ['üíó','üíï','‚ú®','üíñ','‚≠ê','üå∏'];

  function resize() {
    W = canvas.width  = window.innerWidth;
    H = canvas.height = window.innerHeight;
  }
  resize();
  window.addEventListener('resize', resize, { passive: true });

  function startLoop() {
    if (running) return;
    running = true;
    requestAnimationFrame(tick);
  }

  function tick() {
    if (!trailParts.length && !fwParts.length) { running = false; return; }
    ctx.clearRect(0, 0, W, H);

    /* trail */
    for (var i = trailParts.length - 1; i >= 0; i--) {
      var p = trailParts[i];
      p.x += p.vx; p.y += p.vy; p.vy += 0.09;
      p.life -= 0.026;
      if (p.life <= 0) { trailParts.splice(i, 1); continue; }
      ctx.save();
      ctx.globalAlpha = p.life;
      ctx.font = p.size + 'px serif';
      ctx.textAlign = 'center'; ctx.textBaseline = 'middle';
      ctx.fillText(p.emoji, p.x, p.y);
      ctx.restore();
    }

    /* fireworks */
    for (var j = fwParts.length - 1; j >= 0; j--) {
      var q = fwParts[j];
      q.x += q.vx; q.y += q.vy; q.vy += 0.13; q.vx *= 0.984;
      q.alpha -= 0.013;
      if (q.alpha <= 0) { fwParts.splice(j, 1); continue; }
      ctx.save();
      ctx.globalAlpha = q.alpha;
      ctx.shadowBlur = 8; ctx.shadowColor = q.color;
      ctx.beginPath();
      ctx.arc(q.x, q.y, q.size, 0, Math.PI * 2);
      ctx.fillStyle = q.color;
      ctx.fill();
      ctx.restore();
    }
    requestAnimationFrame(tick);
  }

  /* spawn trail on move */
  var lastX = 0, lastY = 0;
  function handleMove(x, y) {
    if (Math.abs(x - lastX) + Math.abs(y - lastY) < 9) return;
    lastX = x; lastY = y;
    if (trailParts.length >= 42) return;
    trailParts.push({
      x: x, y: y,
      vx: (Math.random() - .5) * 3,
      vy: -(Math.random() * 2.8 + .5),
      life: 1,
      size: Math.random() * 16 + 11,
      emoji: HEARTS[Math.floor(Math.random() * HEARTS.length)]
    });
    startLoop();
  }
  document.addEventListener('mousemove', function (e) { handleMove(e.clientX, e.clientY); }, { passive: true });
  document.addEventListener('touchmove', function (e) { handleMove(e.touches[0].clientX, e.touches[0].clientY); }, { passive: true });

  /* firework burst */
  window._launchFirework = function (x, y) {
    var COLORS = ['#f9c8d4','#e8738a','#d8b4f8','#f0c040','#ffffff','#c0506a','#ff69b4','#ffb347','#a0d8ef'];
    for (var i = 0; i < 55; i++) {
      var ang   = (i / 55) * Math.PI * 2;
      var speed = Math.random() * 7 + 3;
      fwParts.push({
        x: x, y: y,
        vx: Math.cos(ang) * speed,
        vy: Math.sin(ang) * speed - 2,
        alpha: 1,
        size: Math.random() * 4 + 2,
        color: COLORS[Math.floor(Math.random() * COLORS.length)]
      });
    }
    startLoop();
  };
}());

/* =======================================================
   4. TYPEWRITER EFFECT
======================================================= */
var TW_TEXT = '–ú–∞–º–æ—á–∫–∞, —Ç—ã ‚Äî –º–æ–π —Ü–µ–ª—ã–π –º–∏—Ä.\n\n–í —ç—Ç–æ—Ç –≤–µ—Å–µ–Ω–Ω–∏–π –¥–µ–Ω—å —Ö–æ—á—É —Å–∫–∞–∑–∞—Ç—å —Ç–µ–±–µ —Å–∞–º—ã–µ –≤–∞–∂–Ω—ã–µ —Å–ª–æ–≤–∞: —è —Ç–µ–±—è –ª—é–±–ª—é. –ö–∞–∂–¥—ã–π –¥–µ–Ω—å, –∫–∞–∂–¥—ã–π —á–∞—Å —Ç—ã ‚Äî —Ä—è–¥–æ–º —Å–æ –º–Ω–æ–π, –¥–∞–∂–µ –∫–æ–≥–¥–∞ –Ω–∞—Å —Ä–∞–∑–¥–µ–ª—è—é—Ç –∫–∏–ª–æ–º–µ—Ç—Ä—ã.\n\n–°–ø–∞—Å–∏–±–æ, —á—Ç–æ —Ç—ã –µ—Å—Ç—å. –ó–∞ —Ç–≤–æ–∏ —Ç—ë–ø–ª—ã–µ —Ä—É–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –≤—Å–µ–≥–¥–∞ –∑–Ω–∞–ª–∏, –∫–∞–∫ —É—Å–ø–æ–∫–æ–∏—Ç—å. –ó–∞ —Ç–≤–æ–π —Å–º–µ—Ö, –∫–æ—Ç–æ—Ä—ã–π –¥–µ–ª–∞–µ—Ç –ª—é–±–æ–π –¥–µ–Ω—å —Å–≤–µ—Ç–ª–µ–µ. –ó–∞ —Ç–≤–æ—é –º—É–¥—Ä–æ—Å—Ç—å, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–º–æ–≥–∞–µ—Ç –º–Ω–µ –∏–¥—Ç–∏ –≤–ø–µ—Ä—ë–¥.\n\n–¢—ã ‚Äî –º–æ–π –ª—É—á—à–∏–π –¥—Ä—É–≥ –∏ —Å–∞–º—ã–π –±–ª–∏–∑–∫–∏–π —á–µ–ª–æ–≤–µ–∫ –Ω–∞ –∑–µ–º–ª–µ. –Ø —Ç–∞–∫ –≥–æ—Ä–∂—É—Å—å —Ç–µ–º, —á—Ç–æ —Ç—ã ‚Äî –º–æ—è –º–∞–º–∞. ‚ù§Ô∏è';

var twStarted = false;
function startTypewriter() {
  if (twStarted) return;
  twStarted = true;
  var el     = document.getElementById('tw-text');
  var cursor = document.getElementById('tw-cursor');
  var i = 0;
  function type() {
    if (i < TW_TEXT.length) {
      var ch = TW_TEXT[i++];
      if (ch === '\n') { el.innerHTML += '<br>'; }
      else             { el.appendChild(document.createTextNode(ch)); }
      var delay = (ch === '.' || ch === '!' || ch === '?') ? 280 :
                  (ch === ',') ? 110 : 38;
      setTimeout(type, delay);
    } else {
      if (cursor) cursor.style.display = 'none';
    }
  }
  setTimeout(type, 400);
}

/* =======================================================
   5. INTERSECTION OBSERVER ‚Äî reveal + typewriter + fireworks
======================================================= */
function setupObservers() {
  /* generic reveal */
  var revObs = new IntersectionObserver(function (entries) {
    entries.forEach(function (e) {
      if (e.isIntersecting) {
        e.target.classList.add('visible');
        revObs.unobserve(e.target);
      }
    });
  }, { threshold: 0.1 });
  document.querySelectorAll('.reveal').forEach(function (el) { revObs.observe(el); });

  /* glass-card 3-D reveal */
  var cardObs = new IntersectionObserver(function (entries) {
    entries.forEach(function (e) {
      if (e.isIntersecting) {
        e.target.classList.add('visible');
        cardObs.unobserve(e.target);
      }
    });
  }, { threshold: 0.12 });
  document.querySelectorAll('.glass-card').forEach(function (c) { cardObs.observe(c); });

  /* typewriter trigger */
  var twObs = new IntersectionObserver(function (entries) {
    entries.forEach(function (e) {
      if (e.isIntersecting) { startTypewriter(); twObs.disconnect(); }
    });
  }, { threshold: 0.2 });
  var greetSec = document.getElementById('greeting');
  if (greetSec) twObs.observe(greetSec);

  /* fireworks trigger */
  var fwFired = false;
  var fwObs = new IntersectionObserver(function (entries) {
    entries.forEach(function (e) {
      if (e.isIntersecting && !fwFired) {
        fwFired = true;
        launchFireworksShow();
        fwObs.disconnect();
      }
    });
  }, { threshold: 0.25 });
  var finalSec = document.getElementById('final');
  if (finalSec) fwObs.observe(finalSec);
}

/* =======================================================
   6. FIREWORKS SHOW
======================================================= */
function launchFireworksShow() {
  var vw = window.innerWidth, vh = window.innerHeight;
  var pts = [
    [.18,.28],[.5,.18],[.82,.28],
    [.28,.55],[.72,.48],[.5,.65],
    [.12,.45],[.88,.38]
  ];
  pts.forEach(function (p, i) {
    setTimeout(function () {
      if (window._launchFirework) window._launchFirework(p[0] * vw, p[1] * vh);
    }, i * 380);
  });
}

/* =======================================================
   7. 3-D CARD TILT
======================================================= */
function initCardTilt() {
  document.querySelectorAll('.glass-card').forEach(function (card) {
    function tilt(cx, cy) {
      if (!card.classList.contains('visible')) return;
      var r  = card.getBoundingClientRect();
      var rx = (-(cy - r.top  - r.height / 2) / r.height) * 14;
      var ry = ( (cx - r.left - r.width  / 2) / r.width)  * 14;
      card.style.transform = 'perspective(650px) rotateX(' + rx + 'deg) rotateY(' + ry + 'deg) scale(1.03)';
      card.style.boxShadow = '0 16px 48px rgba(200,100,140,.28), inset 0 0 24px rgba(255,255,255,.2)';
    }
    function reset() {
      card.style.transform = '';
      card.style.boxShadow = '';
    }
    card.addEventListener('mousemove',  function (e) { tilt(e.clientX, e.clientY); });
    card.addEventListener('mouseleave', reset);
    card.addEventListener('touchstart', function (e) { tilt(e.touches[0].clientX, e.touches[0].clientY); }, { passive: true });
    card.addEventListener('touchend',   reset, { passive: true });
  });
}

/* =======================================================
   8. SHARE BUTTON
======================================================= */
function showToast(msg) {
  var t = document.getElementById('toast');
  t.textContent = msg;
  t.classList.add('show');
  setTimeout(function () { t.classList.remove('show'); }, 2800);
}

var shareBtn = document.getElementById('btn-share');
if (shareBtn) {
  shareBtn.addEventListener('click', function () {
    var data = {
      title: '–° 8 –ú–∞—Ä—Ç–∞, –ú–∞–º–æ—á–∫–∞! üíê',
      text:  '–ü–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ —Å 8 –ú–∞—Ä—Ç–∞ –¥–ª—è —Å–∞–º–æ–π –ª—É—á—à–µ–π –º–∞–º—ã!',
      url:   window.location.href
    };
    if (navigator.share) {
      navigator.share(data).catch(function () {});
    } else if (navigator.clipboard) {
      navigator.clipboard.writeText(window.location.href)
        .then(function ()  { showToast('üîó –°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞!'); })
        .catch(function () { showToast('–°–∫–æ–ø–∏—Ä—É–π —Å—Å—ã–ª–∫—É –∏–∑ –∞–¥—Ä–µ—Å–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ üìã'); });
    } else {
      showToast('–°–∫–æ–ø–∏—Ä—É–π —Å—Å—ã–ª–∫—É –∏–∑ –∞–¥—Ä–µ—Å–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ üìã');
    }
  });
}
</script>
</body>
</html>
